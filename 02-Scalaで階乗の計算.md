# 02 Scalaで階乗の計算

## Scalaで作成するアプリケーション

Scalaでは、ファイル名にアッパーキャメルケースを利用する。（アッパーキャメルケースとは、大文字始まりで単語の区切りを大文字にする記法のこと）

プログラムの主となる処理のことを、メイン処理と呼ぶ。

mainと命名された関数は、ファイルが実行された際に最初に呼ばれる関数となる。（CやJavaにおいても同様）

ただし、Scalaでは、Appトレイトを利用する機会が増えている。

```scala
object Main extends App { }
```

- object : オブジェクトの宣言
- Main   : オブジェクトの命名
- extends: Appで提供された振る舞いをオブジェクトにミックスインする
- App    : その後に宣言された処理を振る舞いとして提供する

- トレイト: 振る舞い
- ミックスイン: 振る舞いをオブジェクトに追加すること

```scala
println("Hello Scala")
```

println関数は、引数に渡された文字列をコンソールに出力して改行する。

## 距離を計算するプログラムの解説

- val: 定数宣言
- var: 再代入可能な数の宣言。ただし、可読性の観点から使うことは良しとされない。

```scala
println(s"走った距離は${distance}キロメートルです")
```

Scalaにおいては、文字列の中で変数を利用する場合は、文字列リテラルの前に``s``を記述し、``${変数}``と書けば読み出すことができる。

## 距離を計算するプログラムの実行

Scalaにおいては、割り算による計算は、余りを無視し、小数点以下が省略される。回避するには、浮動小数点数を与える必要がある。

- Int: 整数値
- Double: 浮動小数点数

- Int
  - 4バイト(32ビット)のデータ
  - -2147483648 から　2147483648 まで(+-20億程度)
  - 32ビットの割り当て
    - 1ビット ：符号部
    - 31ビット：整数部

- Doubule
  - 8バイト(64ビット)のデータ
  - -1.7976931348623157E308 から　1.7976931348623157E308 まで
  - 64ビットの割り当て
    - 1ビット ：符号部
    - 11ビット：指数部
    - 52ビット：仮数部

その他の値型

- 整数
  - Byte: 1バイト
  - Short: 2バイト
  - Int: 4バイト
  - Long: 8バイト
- 浮動小数点数
  - Float: 4バイト
  - Double: 8バイト

- BigInt
  - コンピュータのリソースが許すかぎりの大きな整数を表現できる型

## 課題

スタックオーバーフロー： 再帰呼び出しの上限を超えたときの例外処理

末尾再帰最適化： 関数の戻り値を、1.再帰関数の呼び出し 2.再帰関数の値 に変更し、内部的にループ処理に変換する仕組みのこと。


```scala
object Factorial extends App {
  def factorial(n: Int, f: BigInt): BigInt =
  if (n == 0) f else factorial(n - 1, n * f)
  println(factorial(10000, 1))
}
```